; a larson scanner repeating a stored pattern
; for the 8155

        LXI SP , 8191
        JMP START

        ORG 44H
START:
        ; configure ports
        LXI H,CSADDY
        MVI M,00000011B


BEGIN:  LXI B,PTNB
        LXI D,PTNA

LOOP:   LDAX D          ; write a-pattern
        LXI H,PAADDY
        MOV M,A
        INX D

        LDAX B          ; write b-pattern
        LXI H,PBADDY
        MOV M,A
        INX B

        CALL LDELAY

        MOV A,E         ; start over if at end of a-pattern
        CPI PTNB
        JZ BEGIN
        JMP LOOP

PTNA:   DB 00000001B,00000010B,00000100B,00001000B,00010000B,00100000B,01000000B,10000000B
        DB 00000000B,00000000B,00000000B
        DB 10000000B,01000000B,00100000B,00010000B,00001000B,00000100B,00000010B
PTNB:   DB 00000000B,00000000B,00000000B,00000000B,00000000B,00000000B,00000000B,00000000B
        DB 00000001B,00000010B,00000001B
        DB 00000000B,00000000B,00000000B,00000000B,00000000B,00000000B,00000000B

LDELAY: PUSH B
        LXI B,2000H
        CALL DELAY
        POP B
        RET
